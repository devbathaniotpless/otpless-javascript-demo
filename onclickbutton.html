<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="https://otpless.com/favicon.ico" />
    <title>otpless onclick button loginPage</title>
</head>
<body>
    <!-- A modal where otpless login page will load as a modal -->
    <div id="otpless-login-modal">

      <!-- Add div to load otpless login page with id as given below  -->
      <div id="otpless-login-page"></div>

    </div>

    <!-- button to load otpless login page -->
    <button type="button" id="login-button">Login</button>

    <script>
      // target button & modal
      const loginButton = document.getElementById("login-button");
      const loginModal = document.getElementById("otpless-login-modal");

      // function to open otpless loginPage as a moidal  
      function openOtplessLoginPage() {
        loginModal.style.display = "flex";
        const scriptElement = document.createElement("script");
        scriptElement.type = "text/javascript";
        scriptElement.setAttribute("cid", "YOUR_CID_HERE") //Replace with your cid
        scriptElement.src = "https://otpless.com/auth.js";
      
        document.getElementById("otpless-login-page").appendChild(scriptElement);
        loginButton.style.display = 'none';
      }

      // function to close otplesslogin page
      function closeOtplessLoginPage() {
        loginModal.style.display = "none";
        // document.getElementById("otpless-login-page").innerHTML = "";
        loginButton.style.display="block";
      }

      // function for on click of button openOtplessLoginPage calls to load the page
      function handleLoginButtonClick() {
        openOtplessLoginPage();
      }
      
      function otpless(otplessUser) {
        // Log the data to the console
        console.log(JSON.stringify(otplessUser));

        // Store data in localStorage
        localStorage.setItem('otplessUserData', JSON.stringify(otplessUser));

        // Redirect to another page (replace 'otherpage.html' with the actual filename)
        window.location.href = 'otherpage.html';
      }
      
      // Adding Listeners
      loginButton.addEventListener("click", handleLoginButtonClick);
      loginModal.addEventListener("click", closeOtplessLoginPage);
    </script> 

</body>
</html>